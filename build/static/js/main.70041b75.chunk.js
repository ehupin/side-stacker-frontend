(this.webpackJsonplearn_react=this.webpackJsonplearn_react||[]).push([[0],{42:function(e,t,a){},72:function(e,t){},76:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(35),s=a.n(i),l=a(36),o=a(37),c=a(10),d=a(11),u=a(9),p=a(14),v=a(13),j=a(12),y=a.n(j),m=(a(42),a(0)),h=a(44),b=Object.freeze({WaitingForConnection:{alue:0,message:"Wait for connection to server..."},WaitingForOpponentToConnect:{value:1,message:"Wait for opponent connection..."},WaitingForPlayerMove:{value:2,message:"Play !"},WaitingForOpponentMove:{value:3,message:"Wait for opponent to play..."},PlayerWon:{value:4,message:"You win :)"},OpponentWon:{value:5,message:"You loose :("},Draw:{value:6,message:"Draw :/"}}),O=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var r=h("https://side-stacker.herokuapp.com/");n.state={gameMatrix:[],socket:r,gameId:null,playerId:null,status:b.WaitingForConnection.value};var i=Object(u.a)(n);return r.on("connect",(function(){r.on("player_joined_game",(function(e){if(null===i.state.playerId){var t=Array.from({length:e.game_matrix_size},(function(t){return Array.from({length:e.game_matrix_size},(function(e){return null}))}));i.setState({playerId:e.player_id,gameId:e.game_id,gameMatrix:t})}var a;a=e.game_is_full?0===i.state.playerId?b.WaitingForPlayerMove.value:b.WaitingForOpponentMove.value:b.WaitingForOpponentToConnect.value,i.setState({status:a})}))})),r.on("piece_added",(function(e){var t,a=Object(o.a)(n.state.gameMatrix);a[e.row][e.column]=e.player_id,t=e.game_is_draw?b.Draw.value:e.game_is_won?i.state.playerId===e.player_id?b.PlayerWon.value:b.OpponentWon.value:i.state.playerId===e.player_id?b.WaitingForOpponentMove.value:b.WaitingForPlayerMove.value,n.setState({gameMatrix:a,status:t})})),n}return Object(d.a)(a,[{key:"addButtonClicked",value:function(e,t){this.state.status===b.WaitingForPlayerMove.value&&this.state.socket.emit("add_piece",{rowIndex:e,side:t})}},{key:"render",value:function(){var e,t=this,a=[],n=Object(l.a)(this.state.gameMatrix);try{for(n.s();!(e=n.n()).done;){var r=-1!==e.value.indexOf(null);a.push(r)}}catch(c){n.e(c)}finally{n.f()}var i=Object.keys(b).find((function(e){return b[e].value===t.state.status})),s=b[i].message,o=this.state.status===b.WaitingForPlayerMove.value;return Object(m.jsxs)("div",{id:"game",children:[Object(m.jsxs)("div",{id:"header",children:[Object(m.jsx)("div",{id:"title",children:"Side Stacker"}),Object(m.jsx)("div",{id:"details",children:Object(m.jsxs)("div",{children:["Game ID: ",this.state.gameId]})}),Object(m.jsxs)("div",{id:"playerHeader",children:[Object(m.jsx)(g,{playerId:0,currentPlayer:this.state.playerId}),Object(m.jsx)(g,{playerId:1,currentPlayer:this.state.playerId})]}),Object(m.jsx)("div",{id:"info",children:s})]}),Object(m.jsx)("div",{id:"board",children:this.state.gameMatrix.map((function(e,n){return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)(f,{side:0,enabled:o&&a[n],clickHandler:function(){return t.addButtonClicked(n,0)}}),e.map((function(e,a){return Object(m.jsx)("div",{className:y()({cell:!0,player0:0===t.state.gameMatrix[n][a],player1:1===t.state.gameMatrix[n][a]})},a)})),Object(m.jsx)(f,{side:1,enabled:o&&a[n],clickHandler:function(){return t.addButtonClicked(n,1)}})]},n)}))})]})}}]),a}(r.a.Component),g=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:y()({playerStats:!0,player0:0===this.props.playerId,player1:1===this.props.playerId}),children:Object(m.jsxs)("div",{children:["Player ",this.props.playerId+1,this.props.playerId===this.props.currentPlayer&&Object(m.jsx)("span",{className:"currentPlayerYouString",children:"(you)"})]})})}}]),a}(r.a.Component),f=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=0===this.props.side?"\u25b6":"\u25c0";return Object(m.jsx)("div",{className:y()({button:!0,enabled:this.props.enabled}),onClick:this.props.clickHandler,children:e})}}]),a}(r.a.Component),x=O;s.a.render(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(x,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.70041b75.chunk.js.map