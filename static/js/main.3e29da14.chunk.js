(this.webpackJsonplearn_react=this.webpackJsonplearn_react||[]).push([[0],{70:function(e,t){},74:function(e,t,a){},76:function(e,t){e.exports={serverUrl:"https://side-stacker.herokuapp.com/"}},77:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(35),s=a.n(i),o=a(36),c=a(37),l=a(4),p=a(5),u=a(13),d=a(7),j=a(6),v=a(14),b=a.n(v),h=(a(74),a(0)),y=a(42),O=a(76),m=Object.freeze({WaitingForConnection:{value:0,message:"Wait for connection to server..."},WaitingForOpponentToConnect:{value:1,message:"Wait for opponent connection..."},WaitingForPlayerMove:{value:2,message:"Play !"},WaitingForOpponentMove:{value:3,message:"Wait for opponent to play..."},PlayerWon:{value:4,message:"You win :)"},OpponentWon:{value:5,message:"You loose :("},Draw:{value:6,message:"Draw :/"}}),g=0,f=1,x=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=y(O.serverUrl);n.state={gameMode:null,gameMatrix:[],socket:r,gameId:null,playerId:null,status:m.WaitingForConnection.value};var i=Object(u.a)(n);return r.on("connect",(function(){r.on("player_joined_game",(function(e){if(null===i.state.playerId){var t=Array.from({length:e.game_matrix_size},(function(t){return Array.from({length:e.game_matrix_size},(function(e){return null}))}));i.setState({playerId:e.player_id,gameId:e.game_id,gameMatrix:t})}var a;a=e.game_is_full?0===i.state.playerId?m.WaitingForPlayerMove.value:m.WaitingForOpponentMove.value:m.WaitingForOpponentToConnect.value,i.setState({status:a})}))})),r.on("piece_added",(function(e){var t,a=Object(c.a)(n.state.gameMatrix);a[e.row][e.column]=e.player_id,t=e.game_is_draw?m.Draw.value:e.game_is_won?i.state.playerId===e.player_id?m.PlayerWon.value:m.OpponentWon.value:i.state.playerId===e.player_id?m.WaitingForOpponentMove.value:m.WaitingForPlayerMove.value,n.setState({gameMatrix:a,status:t})})),n}return Object(p.a)(a,[{key:"joinGameClicked",value:function(e){this.state.gameMode=e,this.state.socket.emit("join",{gameMode:e})}},{key:"render",value:function(){return Object(h.jsx)("div",{id:"game",children:Object(h.jsxs)("div",{id:"header",children:[Object(h.jsx)("div",{id:"title",children:"Side Stacker"}),null===this.state.gameMode?Object(h.jsx)(k,{joinFunction:this.joinGameClicked.bind(this)}):Object(h.jsx)(_,{parentState:this.state})]})})}}]),a}(r.a.Component),k=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"button",className:"joinButton",value:"1 player",onClick:function(){return e.props.joinFunction(g)}}),Object(h.jsx)("input",{type:"button",className:"joinButton",value:"2 player",onClick:function(){return e.props.joinFunction(f)}})]})})}}]),a}(r.a.Component),_=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"addButtonClicked",value:function(e,t){this.props.parentState.status===m.WaitingForPlayerMove.value&&this.props.parentState.socket.emit("add_piece",{rowIndex:e,side:t})}},{key:"render",value:function(){var e,t=this,a=[],n=Object(o.a)(this.props.parentState.gameMatrix);try{for(n.s();!(e=n.n()).done;){var r=-1!==e.value.indexOf(null);a.push(r)}}catch(l){n.e(l)}finally{n.f()}var i=Object.keys(m).find((function(e){return m[e].value===t.props.parentState.status})),s=m[i].message,c=this.props.parentState.status===m.WaitingForPlayerMove.value;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{id:"details",children:Object(h.jsxs)("div",{children:["Game ID: ",this.props.parentState.gameId]})}),Object(h.jsxs)("div",{id:"playerHeader",children:[Object(h.jsx)(I,{playerId:0,currentPlayer:this.props.parentState.playerId}),Object(h.jsx)(I,{playerId:1,currentPlayer:this.props.parentState.playerId})]}),Object(h.jsx)("div",{id:"info",children:s})]}),Object(h.jsx)("div",{id:"board",children:this.props.parentState.gameMatrix.map((function(e,n){return Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)(M,{side:0,enabled:c&&a[n],clickHandler:function(){return t.addButtonClicked(n,0)}}),e.map((function(e,a){return Object(h.jsx)("div",{className:b()({cell:!0,player0:0===t.props.parentState.gameMatrix[n][a],player1:1===t.props.parentState.gameMatrix[n][a]})},a)})),Object(h.jsx)(M,{side:1,enabled:c&&a[n],clickHandler:function(){return t.addButtonClicked(n,1)}})]},n)}))})]})}}]),a}(r.a.Component),I=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{className:b()({playerStats:!0,player0:0===this.props.playerId,player1:1===this.props.playerId}),children:Object(h.jsxs)("div",{children:["Player ",this.props.playerId+1,this.props.playerId===this.props.currentPlayer&&Object(h.jsx)("span",{className:"currentPlayerYouString",children:"(you)"})]})})}}]),a}(r.a.Component),M=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=0===this.props.side?"\u25b6":"\u25c0";return Object(h.jsx)("div",{className:b()({button:!0,enabled:this.props.enabled}),onClick:this.props.clickHandler,children:e})}}]),a}(r.a.Component),S=x;s.a.render(Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.3e29da14.chunk.js.map